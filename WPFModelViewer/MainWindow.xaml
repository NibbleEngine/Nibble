<Window x:Class="WPFModelViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WPFModelViewer"
        mc:Ignorable="d"
        Title="No Man's Sky Model Viewer" Height="720" Width="1280"
        MinHeight="400" MinWidth="800"
        Closing="MainWindow_OnClosing"
        Closed="MainWindow_OnClosed"
        Loaded="MainWindow_OnLoaded">
    <Window.Resources>
        <ResourceDictionary>
            <Style x:Key="TreeViewItemStyle" TargetType="TreeViewItem">
                <Setter Property="IsExpanded" Value="False" />
                <Setter Property="IsSelected" Value="{Binding IsInitiallySelected, Mode=OneTime}" />
                <Setter Property="KeyboardNavigation.AcceptsReturn" Value="True" />
                <!--Setter Property="dw:VirtualToggleButton.IsVirtualToggleButton" Value="True" /-->
                <!--Setter Property="dw:VirtualToggleButton.IsChecked" Value="{Binding IsChecked}" /-->
            </Style>
            <HierarchicalDataTemplate x:Key="CheckBoxItemTemplate" DataType="{x:Type local:ModelNode}" ItemsSource="{Binding Children, Mode=OneTime}">
                <StackPanel Orientation="Horizontal">
                    <!-- These elements are bound to a FooViewModel object. -->
                    <CheckBox
                            Focusable="False" 
                            IsChecked="{Binding IsChecked}" 
                            VerticalAlignment="Center"
                        />
                    <ContentPresenter 
                            Content="{Binding Name, Mode=OneTime}" 
                            Margin="2,0"
                        />
                </StackPanel>
            </HierarchicalDataTemplate>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>
        <Menu Grid.Row="0" Width="Auto" Height="20" VerticalAlignment="Top">
            <MenuItem Header="File">
                <MenuItem Header ="Open File" Click="OpenFile"/>
                <MenuItem Header ="Settings" Click="showSettingsDialog"/>
                <MenuItem Header ="Close" Click="FormClose"/>
            </MenuItem>
            <MenuItem Header="About" Click="showAboutDialog"/>
        </Menu>

        <!-- Horizontal Splitter -->
        <Grid  Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="6*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition MinHeight="180"/>
                    <RowDefinition Height="7*"/>
                    <RowDefinition Height="3*"/>
                </Grid.RowDefinitions>
                <!--Settings Tab Control-->
                <TabControl Grid.Row="0">
                    <TabItem Header="Camera">
                        <GroupBox>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                </Grid.RowDefinitions>
                                <DockPanel Grid.Row="0" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">FOV</TextBlock>
                                    <Slider x:Name="sliderFOV"  Value="35" Minimum="1" Maximum="100" SmallChange="1"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="1" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">Light Distance</TextBlock>
                                    <Slider x:Name="sliderlightDistance" Value="2.0" Minimum="0" Maximum="20" SmallChange="0.2"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="2" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">Cam Speed</TextBlock>
                                    <Slider x:Name="sliderMovementSpeed"  Value="1" Minimum="1" Maximum="10" SmallChange="0.01"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="3" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">Cam Speed Factor</TextBlock>
                                    <Slider x:Name="sliderMovementFactor"  Value="2" Minimum="1" Maximum="10" SmallChange="1"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="4" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">Light Intensity</TextBlock>
                                    <Slider x:Name="sliderLightIntensity"  Value="3.0" Minimum="0.0" Maximum="20.0" SmallChange="0.1"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="5" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">zNear</TextBlock>
                                    <Slider x:Name="sliderzNear"  Value="0.05" Minimum="0.01" Maximum="1" SmallChange="0.1"></Slider>
                                </DockPanel>
                                <DockPanel Grid.Row="6" HorizontalAlignment="Stretch">
                                    <TextBlock Width="80">zFar</TextBlock>
                                    <Slider x:Name="sliderzFar" Value="15000" Minimum="101" Maximum="30000" SmallChange="5"></Slider>
                                </DockPanel>
                                <Button Grid.Row="7" Height="20" Click="CameraResetPos">Reset Camera</Button>
                            </Grid>
                        </GroupBox>
                    </TabItem>
                    <TabItem Header="Render">
                        <GroupBox MinHeight="100" Header="RenderOptions">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="93*"/>
                                    <ColumnDefinition Width="148*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                    <RowDefinition Height="20"/>
                                </Grid.RowDefinitions>
                                <DockPanel Grid.Row="0" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Wireframe</TextBlock>
                                    <CheckBox x:Name="toggleWireframe" Width="20" HorizontalAlignment="Right" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                                <DockPanel Grid.Row="1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Use Textures</TextBlock>
                                    <CheckBox x:Name="useTextures" Width="20" HorizontalAlignment="Right" IsChecked="True" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                                <DockPanel Grid.Row="2" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Use Lighting</TextBlock>
                                    <CheckBox x:Name="useLighting" Width="20" HorizontalAlignment="Right" IsChecked="True" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                                <DockPanel Grid.Row="3" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Render Info</TextBlock>
                                    <CheckBox x:Name="toggleInfo" Width="20" HorizontalAlignment="Right" IsChecked="True" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                                <DockPanel Grid.Row="4" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Render Lights</TextBlock>
                                    <CheckBox x:Name="toggleLights" Width="20" HorizontalAlignment="Right" IsChecked="True" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                                <DockPanel Grid.Row="5" HorizontalAlignment="Stretch" Grid.ColumnSpan="2">
                                    <TextBlock HorizontalAlignment="Left">Collisions</TextBlock>
                                    <CheckBox x:Name="toggleCollisions" Width="20" HorizontalAlignment="Right" Click="updateRenderOptions"></CheckBox>
                                </DockPanel>
                            </Grid>

                        </GroupBox>
                    </TabItem>
                </TabControl>
                <!--Camera Settings -->


                <GroupBox Grid.Row="1" Header="SceneGraph" BorderThickness="2">
                    <TreeView x:Name="SceneTreeView"
                                  ItemContainerStyle="{StaticResource TreeViewItemStyle}"
                                  ItemsSource="{Binding Mode=OneTime}"
                                  ItemTemplate="{StaticResource CheckBoxItemTemplate}"
                                  SelectedItemChanged="SceneTreeView_OnSelectedItemChanged">

                    </TreeView>
                </GroupBox>

                <GroupBox Grid.Row="3" Header="ProcGenTools" BorderThickness="2">
                    <Button FontSize="18" Click="ButtonBase_OnClick">ProcGen</Button>
                </GroupBox>

            </Grid>
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"/>
            <WindowsFormsHost Grid.Column="2" x:Name="Host" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
            <GridSplitter Grid.Column="3" Width="5" HorizontalAlignment="Stretch"/>
            <Grid Grid.Column="4">
                <GroupBox x:Name="ObjectInfoBox" Header="Object Information">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="50*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <DockPanel Grid.Row="0" >
                            <TextBlock>Name:</TextBlock>
                            <TextBlock Text="{Binding Name}" HorizontalAlignment="Right"></TextBlock>
                        </DockPanel>
                        <DockPanel Grid.Row="1" >
                            <TextBlock>Type:</TextBlock>
                            <TextBlock Text="{Binding ModelType}" HorizontalAlignment="Right"></TextBlock>
                        </DockPanel>
                        <DockPanel Grid.Row="2" >
                            <TextBlock>Material Name:</TextBlock>
                            <TextBlock Text="{Binding Material}" HorizontalAlignment="Right"></TextBlock>
                        </DockPanel>
                        <StackPanel Grid.Row="3" Orientation="Vertical">
                            <TextBlock>Texture List:</TextBlock>
                            <ListBox FontSize="10" ItemsSource="{Binding TextureList}" VerticalAlignment="Stretch" Height="Auto" ></ListBox>
                        </StackPanel>
                        <local:ModelTransform Grid.Row="4" VerticalAlignment="Bottom" x:Name="activeTransform"/>
                    </Grid>
                </GroupBox>
            </Grid>

        </Grid>

        <StatusBar HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="30" Grid.Row="2">
            <StatusBarItem HorizontalAlignment="Left">
                <TextBlock x:Name="StatusLabel" >Ready</TextBlock>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                Created by gregkwaste
            </StatusBarItem>
        </StatusBar>


        <!-- Common Window stuff-->


        <!-- Item Templates -->

    </Grid>


</Window>
